import java.io.*;
import java.util.*;

class Liquids

{
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  private static int ID;
  private static Room rm;
  private static Entity drinker;
  private static String cname;

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  public static final int NUM_LIQUIDS = 3;
  public static final int WATER   = 1;
  public static final int CURATIO = 2;
  public static final int PANACEA = 3;

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  public static int getLiquidID(String name)

  {
    if (name.equalsIgnoreCase("water"))    return WATER;
    if (name.equalsIgnoreCase("curatio"))  return CURATIO;
    if (name.equalsIgnoreCase("panacea"))  return PANACEA;

    return -1;
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  public static void drink(Entity Drinker, int liquidID, String containerName)

  {
    ID = liquidID;
    drinker = Drinker;
    rm = Drinker.getRoom();
    cname = containerName + "#N";

    switch (ID)

    {
      case WATER:    drinkWater();    return;
      case CURATIO:  drinkCuratio();  return;
      case PANACEA:  drinkPanacea();  return;
    }

    drinkUnknown();
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  public static String getDesc(int liquidID)

  {
    switch (liquidID)

    {
      case WATER:    return "clear water";
      case CURATIO:  return "blue liquid";
      case PANACEA:  return "green liquid";
    }

    return "liquid";
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  public static String getLiquidName(int liquidID)

  {
    switch (liquidID)

    {
      case WATER:    return "Water";
      case CURATIO:  return "Curatio";
      case PANACEA:  return "Panacea";
    }

    return "Unknown";
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  public static String getAmount(Item I)

  {
    float pct;
    String desc = getDesc(I.getLiquidType());
    String name = Utility.capitalLname(I.getLName()) + " is ";
    int num = I.getLiquidUses();
    int max = I.getLiquidMax();

    if (I.findType(Item.ITEM_FOUNTAIN) != -1)
      return (name + "flowing with " + desc + ".");

    if (max == 0) return (name + "empty.");

    pct = ((float)((float)num / (float)max));
    pct = pct * 100;

    if (pct <= 0)                     return (name + "empty.");
    if (pct == 100)                   return (name + "full of " + desc + ".");
    if ((num == 1) && (max > 2))      return (name + "nearly empty.");
    if ((num == max-1) && (max > 2))  return (name + "nearly full of " + desc + ".");
    if ((pct >= 0) && (pct <= 20))    return (name + "nearly empty.");
    if ((pct >= 20) && (pct < 40))    return (name + "less than half full of " + desc + ".");
    if ((pct >= 40) && (pct < 60))    return (name + "about half full of " + desc + ".");
    if ((pct >= 60) && (pct < 80))    return (name + "more than half full of " + desc + ".");
    if ((pct >= 80) && (pct < 100))   return (name + "nearly full of " + desc + ".");

    return (name + "empty.");
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  private static void standardRoomEcho()

  {
    rm.xecho(drinker, drinker.getName() + " drinks from " + cname + ".");
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  private static void standardEcho(String desc)

  {
    drinker.echo("You drink " + desc + " from " + cname + ".");
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  private static void standardEcho(String desc, String secondLine)

  {
    drinker.echo("You drink " + desc + " from " + cname + ".\r\n" + secondLine);
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  private static void drinkUnknown()

  {
    standardEcho("something");
    standardRoomEcho();
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  private static void drinkWater()

  {
    standardEcho("water", "Your thirst is quenched.");
    standardRoomEcho();
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  private static void drinkCuratio()

  {
    standardEcho("a blue potion");
    drinker.restore();
    standardRoomEcho();
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  private static void drinkPanacea()

  {
    standardEcho("a bright green potion");
    drinker.restore();
    standardRoomEcho();
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
}
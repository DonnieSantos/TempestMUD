import mx.transitions.Tween;
import mx.transitions.easing.*;
import com.tempest.storycards.Draw;
import com.tempest.storycards.StoryCardData;
import com.tempest.storycards.RowHighlighter;

class com.tempest.storycards.StoryCardRow
{
	///////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////////////////

	private var _StoryCardRow:MovieClip;
	private var _TextFields:Array = new Array();

	///////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////////////////

	public function getMovieClip() : MovieClip { return _StoryCardRow; }

	///////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////////////////

	public function StoryCardRow()
	{
		_StoryCardRow = _root.createEmptyMovieClip("", _root.getNextHighestDepth());

		_TextFields[0] = _StoryCardRow.createTextField("", depth(), 10, 0, 85, 50);
		_TextFields[1] = _StoryCardRow.createTextField("", depth(), 65, 0, 85, 50);
		_TextFields[2] = _StoryCardRow.createTextField("", depth(), 280, 0, 85, 50);
		_TextFields[3] = _StoryCardRow.createTextField("", depth(), 380, 0, 85, 50);
		_TextFields[4] = _StoryCardRow.createTextField("", depth(), 460, 0, 85, 50);
		_TextFields[5] = _StoryCardRow.createTextField("", depth(), 540, 0, 85, 50);
		_TextFields[6] = _StoryCardRow.createTextField("", depth(), 630, 0, 85, 50);
		_TextFields[7] = _StoryCardRow.createTextField("", depth(), 710, 0, 85, 50);

		formatTextFields();
	}

	///////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////////////////

	private function Highlight()
	{
		var rowHighlighter:MovieClip = _root["RowHighlighter"];
		var tween:Tween = new Tween(rowHighlighter, "_y", Regular.easeOut, rowHighlighter._y, _StoryCardRow._y-6, 3, false);
	}

	///////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////////////////

	private function depth():Number
	{
		return _StoryCardRow.getNextHighestDepth();
	}

	///////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////////////////

	public function updateText(storyCardData:StoryCardData)
	{
		for (var i=0; i<8; i++)
		{
			_TextFields[i].text = storyCardData.GetCardData()[i];
		}
	}

	///////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////////////////

	public function setYCoordinate(yCoordinate:Number)
	{
		_StoryCardRow._y = yCoordinate;
	}

	///////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////////////////

	private function formatTextFields()
	{
		for (var i=0; i<8; i++)
		{
			Draw.FormatLink(_TextFields[i], "Times New Roman", 12, false);
		}
	}

	///////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////////////////
}